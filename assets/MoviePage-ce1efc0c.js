import{h as $,r as i,i as W,k as I,j as e,l as M,n as P,m as y,u as h,o as B,s as C,p as A}from"./index-fbaec3df.js";import{G as F,T as x,u as b,a as S,c as D}from"./index.esm-fe4d9c29.js";const O=t=>t.movieInfo.status,k=t=>t.movieInfo.error,H="_movieInner_68jfe_1",L="_movieHeader_68jfe_7",z="_movieWrapper_68jfe_13",G="_movieTitle_68jfe_22",J="_movieDescription_68jfe_30",E="_movieRatings_68jfe_30",K="_userRating_68jfe_30",U="_moviePoster_68jfe_46",V="_ratingsBox_68jfe_51",Y="_ratingsWrapper_68jfe_58",q="_ratingItem_68jfe_66",Q="_ratingTitle_68jfe_85",X="_movieReviews_68jfe_94",Z="_arrowIcon_68jfe_99",ee="_imdb_68jfe_103",te="_tomatoes_68jfe_107",se="_metacritic_68jfe_112",o={movieInner:H,movieHeader:L,movieWrapper:z,movieTitle:G,movieDescription:J,movieRatings:E,userRating:K,moviePoster:U,ratingsBox:V,ratingsWrapper:Y,ratingItem:q,ratingTitle:Q,movieReviews:X,arrowIcon:Z,imdb:ee,tomatoes:te,metacritic:se},re=t=>t.movieInfo.movieInfo,oe=$(re,t=>t),ne=i.forwardRef(({bsPrefix:t,className:a,striped:r,bordered:p,borderless:g,hover:d,size:f,variant:v,responsive:u,...j},_)=>{const c=W(t,"table"),n=I(a,c,v&&`${c}-${v}`,f&&`${c}-${f}`,r&&`${c}-${typeof r=="string"?`striped-${r}`:"striped"}`,p&&`${c}-bordered`,g&&`${c}-borderless`,d&&`${c}-hover`),l=e.jsx("table",{...j,className:n,ref:_});if(u){let s=`${c}-responsive`;return typeof u=="string"&&(s=`${s}-${u}`),e.jsx("div",{className:s,children:l})}return l}),ie=ne;function ae(t){return F({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 38.013c-22.458 0-66.472 110.3-84.64 123.502-18.17 13.2-136.674 20.975-143.614 42.334-6.94 21.358 84.362 97.303 91.302 118.662 6.94 21.36-22.286 136.465-4.116 149.665 18.17 13.2 118.61-50.164 141.068-50.164 22.458 0 122.9 63.365 141.068 50.164 18.17-13.2-11.056-128.306-4.116-149.665 6.94-21.36 98.242-97.304 91.302-118.663-6.94-21.36-125.444-29.134-143.613-42.335-18.168-13.2-62.182-123.502-84.64-123.502z"}}]})(t)}const ce="_star_5p1gm_1",le="_filled_5p1gm_7",me="_editable_5p1gm_11",w={star:ce,filled:le,editable:me},de=i.memo(({isEditable:t=!1,rating:a,setRating:r,id:p,...g})=>{const[d,f]=i.useState(new Array(5).fill(e.jsx(e.Fragment,{}))),v=(n,l)=>{const s=localStorage.getItem("ratings");let m={};s&&(m=JSON.parse(s)),m[n]=l,localStorage.setItem("ratings",JSON.stringify(m))},u=n=>{!t||!r||(r(n),v(p,n))},j=(n,l)=>{l.code!=="Space"||!r||(r(n),v(p,n))},_=i.useCallback(n=>{const l=d.map((s,m)=>e.jsx(ae,{className:I(w.star,{[w.filled]:m<n,[w.editable]:t}),onMouseEnter:()=>c(m+1),onClick:()=>u(m+1),tabIndex:t?0:-1,onKeyDown:R=>t&&j(m+1,R)}));f(l)},[t,d,u,j]),c=i.useCallback(n=>{t&&_(n)},[t,_]);return i.useEffect(()=>{_(a)},[a]),e.jsx("div",{...g,onMouseLeave:()=>c(a),children:d.map((n,l)=>e.jsx("span",{children:n},l))})}),ve="_reviewWrapper_kmfc2_1",pe={reviewWrapper:ve},ue=i.memo(({content:t})=>e.jsx("div",{className:pe.reviewWrapper,children:e.jsx(x,{role:"title",content:t})})),ge="_reviewFormWrapper_frk8l_1",fe="_textarea_frk8l_8",N={reviewFormWrapper:ge,textarea:fe},_e=i.memo(({movieId:t})=>{const[a,r]=i.useState(""),p=b(),g=i.useCallback(f=>{var v;r((v=f.target)==null?void 0:v.value)},[]),d=i.useCallback(()=>{a.trim()!==""&&t&&(p(M.addReview({id:P(),body:a,movieId:t})),r(""))},[a,t,p]);return e.jsxs("div",{className:N.reviewFormWrapper,children:[e.jsx("textarea",{value:a,onChange:g,className:N.textarea}),e.jsx(S,{color:"secondary",size:"m",onClick:d,disabled:a.trim()==="",children:"Add Review"})]})});function he(){var c,n,l;const{id:t}=y(),a=b(),r=h(oe),p=h(O),g=h(k),d=[],f=B(),[v,u]=i.useState(0),j=h(C);Object.keys(r).map(s=>{!s.includes("Poster")&&!s.includes("Ratings")&&!s.includes("Response")&&!s.includes("Plot")&&!s.includes("Title")&&!s.includes("Metascore")&&!s.includes("imdb")&&!s.includes("imdb")&&d.push(s)}),i.useEffect(()=>{const s=localStorage.getItem("ratings"),m=JSON.parse(s);m&&Object.entries(m).find(([R,T])=>{R===t&&u(Number(T))})},[t]),i.useEffect(()=>{t&&a(A({id:t}))},[t,a]);const _=i.useMemo(()=>j.filter(s=>s.movieId===t),[j,t]);return p=="loading"?e.jsx("h2",{children:"Loading..."}):g!==void 0?e.jsx("h2",{children:g}):(d.pop(),e.jsxs("div",{className:o.movieInner,children:[e.jsxs("div",{className:o.movieHeader,children:[e.jsx(S,{color:"transparent",size:"m",onClick:()=>f(-1),children:e.jsx(D,{className:o.arrowIcon})}),e.jsx(x,{role:"title",content:r.Title,isBold:!0,className:o.movieTitle})]}),e.jsxs("div",{className:o.movieWrapper,children:[r!==null?e.jsx("img",{src:r.Poster!=="N/A"?r.Poster:"https://via.placeholder.com/350x450?text=${movieInfo.Title}",alt:r.Title,className:o.moviePoster}):"Movie Info not Found",e.jsx("div",{className:o.movieInfo,children:e.jsxs(ie,{bordered:!0,children:[e.jsx("thead",{}),e.jsx("tbody",{children:d.map((s,m)=>e.jsxs("tr",{children:[e.jsx("td",{children:s}),e.jsx("td",{children:r[s]})]},m))})]})})]}),e.jsx(x,{role:"text",content:r.Plot,className:o.movieDescription}),e.jsxs("div",{className:o.ratingsBox,children:[e.jsxs("div",{className:o.movieRatings,children:[e.jsx(x,{role:"title",content:"Ratings",className:o.ratingTitle}),e.jsx("div",{className:o.ratingsWrapper,children:(c=r.Ratings)!=null&&c.length&&((n=r.Ratings)==null?void 0:n.length)>0?(l=r.Ratings)==null?void 0:l.map(s=>e.jsxs("div",{className:I(o.ratingItem,{[o.imdb]:s.Source==="Internet Movie Database",[o.tomatoes]:s.Source==="Rotten Tomatoes",[o.metacritic]:s.Source==="Metacritic"}),children:[e.jsx("span",{children:s.Source}),e.jsx("span",{children:s.Value})]},s.Source)):e.jsx(x,{role:"title",content:"Ratings not Found"})})]}),e.jsxs("div",{className:o.userRating,children:[e.jsx(x,{role:"title",content:`Your ${r.Type} rating`,className:o.ratingTitle}),e.jsx(de,{rating:v,setRating:u,isEditable:!0,id:t})]})]}),e.jsxs("div",{className:o.movieReviewsWrapper,children:[e.jsx(x,{role:"title",content:"Reviews",isBold:!0,className:o.movieReviews}),_.length>0?_.map(s=>e.jsx(ue,{content:s.body},s.id)):e.jsx(x,{role:"title",content:"Reviews not Found"}),e.jsx(_e,{movieId:t||""})]})]}))}export{he as default};
