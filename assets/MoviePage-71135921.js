import{h as $,r as a,i as W,k as I,j as e,l as M,n as P,m as y,u as h,o as B,s as C,p as A}from"./index-09663833.js";import{G as F,T as x,u as b,a as S,c as D}from"./index.esm-96749ba8.js";const O=t=>t.movieInfo.status,k=t=>t.movieInfo.error,H="_movieInner_68jfe_1",L="_movieHeader_68jfe_7",z="_movieWrapper_68jfe_13",G="_movieTitle_68jfe_22",J="_movieDescription_68jfe_30",E="_movieRatings_68jfe_30",K="_userRating_68jfe_30",U="_moviePoster_68jfe_46",V="_ratingsBox_68jfe_51",Y="_ratingsWrapper_68jfe_58",q="_ratingItem_68jfe_66",Q="_ratingTitle_68jfe_85",X="_movieReviews_68jfe_94",Z="_arrowIcon_68jfe_99",ee="_imdb_68jfe_103",te="_tomatoes_68jfe_107",se="_metacritic_68jfe_112",r={movieInner:H,movieHeader:L,movieWrapper:z,movieTitle:G,movieDescription:J,movieRatings:E,userRating:K,moviePoster:U,ratingsBox:V,ratingsWrapper:Y,ratingItem:q,ratingTitle:Q,movieReviews:X,arrowIcon:Z,imdb:ee,tomatoes:te,metacritic:se},oe=t=>t.movieInfo.movieInfo,re=$(oe,t=>t),ne=a.forwardRef(({bsPrefix:t,className:i,striped:o,bordered:p,borderless:f,hover:d,size:_,variant:v,responsive:u,...j},g)=>{const c=W(t,"table"),n=I(i,c,v&&`${c}-${v}`,_&&`${c}-${_}`,o&&`${c}-${typeof o=="string"?`striped-${o}`:"striped"}`,p&&`${c}-bordered`,f&&`${c}-borderless`,d&&`${c}-hover`),l=e.jsx("table",{...j,className:n,ref:g});if(u){let s=`${c}-responsive`;return typeof u=="string"&&(s=`${s}-${u}`),e.jsx("div",{className:s,children:l})}return l}),ae=ne;function ie(t){return F({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 38.013c-22.458 0-66.472 110.3-84.64 123.502-18.17 13.2-136.674 20.975-143.614 42.334-6.94 21.358 84.362 97.303 91.302 118.662 6.94 21.36-22.286 136.465-4.116 149.665 18.17 13.2 118.61-50.164 141.068-50.164 22.458 0 122.9 63.365 141.068 50.164 18.17-13.2-11.056-128.306-4.116-149.665 6.94-21.36 98.242-97.304 91.302-118.663-6.94-21.36-125.444-29.134-143.613-42.335-18.168-13.2-62.182-123.502-84.64-123.502z"}}]})(t)}const ce="_star_5p1gm_1",le="_filled_5p1gm_7",me="_editable_5p1gm_11",w={star:ce,filled:le,editable:me},de=a.memo(({isEditable:t=!1,rating:i,setRating:o,id:p,...f})=>{const[d,_]=a.useState(new Array(5).fill(e.jsx(e.Fragment,{}))),v=(n,l)=>{const s=localStorage.getItem("ratings");let m={};s&&(m=JSON.parse(s)),m[n]=l,localStorage.setItem("ratings",JSON.stringify(m))},u=n=>{!t||!o||(o(n),v(p,n))},j=(n,l)=>{l.code!=="Space"||!o||(o(n),v(p,n))},g=a.useCallback(n=>{const l=d.map((s,m)=>e.jsx(ie,{className:I(w.star,{[w.filled]:m<n,[w.editable]:t}),onMouseEnter:()=>c(m+1),onClick:()=>u(m+1),tabIndex:t?0:-1,onKeyDown:R=>t&&j(m+1,R)}));_(l)},[t,d,u,j]),c=a.useCallback(n=>{t&&g(n)},[t,g]);return a.useEffect(()=>{g(i)},[i]),e.jsx("div",{...f,onMouseLeave:()=>c(i),children:d.map((n,l)=>e.jsx("span",{children:n},l))})}),ve="_reviewWrapper_kmfc2_1",pe={reviewWrapper:ve},ue=a.memo(({content:t})=>e.jsx("div",{className:pe.reviewWrapper,children:e.jsx(x,{role:"title",content:t})})),ge="_reviewFormWrapper_frk8l_1",fe="_textarea_frk8l_8",N={reviewFormWrapper:ge,textarea:fe},_e=a.memo(({movieId:t})=>{const[i,o]=a.useState(""),p=b(),f=a.useCallback(_=>{var v;o((v=_.target)==null?void 0:v.value)},[]),d=a.useCallback(()=>{i.trim()!==""&&t&&(p(M.addReview({id:P(),body:i,movieId:t})),o(""))},[i,t,p]);return e.jsxs("div",{className:N.reviewFormWrapper,children:[e.jsx("textarea",{value:i,onChange:f,className:N.textarea}),e.jsx(S,{color:"secondary",size:"m",onClick:d,disabled:i.trim()==="",children:"Add Review"})]})});function he(){var c,n,l;const{id:t}=y(),i=b(),o=h(re),p=h(O),f=h(k),d=[],_=B(),[v,u]=a.useState(0),j=h(C);Object.keys(o).map(s=>{!s.includes("Poster")&&!s.includes("Ratings")&&!s.includes("Response")&&!s.includes("Plot")&&!s.includes("Title")&&!s.includes("Metascore")&&!s.includes("imdb")&&!s.includes("imdb")&&d.push(s)}),a.useEffect(()=>{const s=localStorage.getItem("ratings"),m=JSON.parse(s);Object.entries(m).find(([R,T])=>{R===t&&u(Number(T))})},[t]),a.useEffect(()=>{t&&i(A({id:t}))},[t,i]);const g=a.useMemo(()=>j.filter(s=>s.movieId===t),[j,t]);return p=="loading"?e.jsx("h2",{children:"Loading..."}):f!==void 0?e.jsx("h2",{children:f}):(d.pop(),console.log(g),e.jsxs("div",{className:r.movieInner,children:[e.jsxs("div",{className:r.movieHeader,children:[e.jsx(S,{color:"transparent",size:"m",onClick:()=>_(-1),children:e.jsx(D,{className:r.arrowIcon})}),e.jsx(x,{role:"title",content:o.Title,isBold:!0,className:r.movieTitle})]}),e.jsxs("div",{className:r.movieWrapper,children:[o!==null?e.jsx("img",{src:o.Poster!=="N/A"?o.Poster:"https://via.placeholder.com/350x450?text=${movieInfo.Title}",alt:o.Title,className:r.moviePoster}):"Movie Info not Found",e.jsx("div",{className:r.movieInfo,children:e.jsxs(ae,{bordered:!0,children:[e.jsx("thead",{}),e.jsx("tbody",{children:d.map((s,m)=>e.jsxs("tr",{children:[e.jsx("td",{children:s}),e.jsx("td",{children:o[s]})]},m))})]})})]}),e.jsx(x,{role:"text",content:o.Plot,className:r.movieDescription}),e.jsxs("div",{className:r.ratingsBox,children:[e.jsxs("div",{className:r.movieRatings,children:[e.jsx(x,{role:"title",content:"Ratings",className:r.ratingTitle}),e.jsx("div",{className:r.ratingsWrapper,children:(c=o.Ratings)!=null&&c.length&&((n=o.Ratings)==null?void 0:n.length)>0?(l=o.Ratings)==null?void 0:l.map(s=>e.jsxs("div",{className:I(r.ratingItem,{[r.imdb]:s.Source==="Internet Movie Database",[r.tomatoes]:s.Source==="Rotten Tomatoes",[r.metacritic]:s.Source==="Metacritic"}),children:[e.jsx("span",{children:s.Source}),e.jsx("span",{children:s.Value})]},s.Source)):e.jsx(x,{role:"title",content:"Ratings not Found"})})]}),e.jsxs("div",{className:r.userRating,children:[e.jsx(x,{role:"title",content:`Your ${o.Type} rating`,className:r.ratingTitle}),e.jsx(de,{rating:v,setRating:u,isEditable:!0,id:t})]})]}),e.jsxs("div",{className:r.movieReviewsWrapper,children:[e.jsx(x,{role:"title",content:"Reviews",isBold:!0,className:r.movieReviews}),g.length>0?g.map(s=>e.jsx(ue,{content:s.body},s.id)):e.jsx(x,{role:"title",content:"Reviews not Found"}),e.jsx(_e,{movieId:t||""})]})]}))}export{he as default};
